---
config:
  theme: 'base'
  themeVariables:
    primaryColor: '#BB2528'
    primaryTextColor: '#fff'
    primaryBorderColor: '#7C0000'
    lineColor: '#F8B229'
    secondaryColor: '#006100'
    tertiaryColor: '#fff'
---
requirementDiagram

    requirement business_req {
        id: 1
        text: "Secure cloud infrastructure"
        risk: high
        verifymethod: test
    }

    requirement compliance_req {
        id: 2
        text: "GDPR compliance"
        risk: high
        verifymethod: analysis
    }

    requirement performance_req {
        id: 3
        text: "Scalable performance"
        risk: medium
        verifymethod: test
    }

    requirement cost_req {
        id: 4
        text: "Cost optimization"
        risk: medium
        verifymethod: analysis
    }

    functionalRequirement security_config {
        id: 1.1
        text: "Encryption enabled"
        risk: high
        verifymethod: test
    }

    functionalRequirement network_security {
        id: 1.2
        text: "Network segmentation"
        risk: high
        verifymethod: test
    }

    functionalRequirement data_protection {
        id: 2.1
        text: "Data minimization"
        risk: high
        verifymethod: inspection
    }

    functionalRequirement audit_logging {
        id: 2.2
        text: "Audit logging"
        risk: medium
        verifymethod: test
    }

    functionalRequirement auto_scaling {
        id: 3.1
        text: "Automatic scaling"
        risk: medium
        verifymethod: test
    }

    functionalRequirement load_balancing {
        id: 3.2
        text: "Load balancing"
        risk: medium
        verifymethod: test
    }

    functionalRequirement resource_optimization {
        id: 4.1
        text: "Resource optimization"
        risk: low
        verifymethod: analysis
    }

    element terraform_config {
        type: "Infrastructure code"
    }

    element security_tests {
        type: "Test suite"
    }

    element compliance_scanner {
        type: "Analysis tool"
    }

    element performance_tests {
        type: "Test suite"
    }

    element cost_analyzer {
        type: "Analysis tool"
    }

    business_req - contains -> security_config
    business_req - contains -> network_security
    compliance_req - contains -> data_protection
    compliance_req - contains -> audit_logging
    performance_req - contains -> auto_scaling
    performance_req - contains -> load_balancing
    cost_req - contains -> resource_optimization

    security_config - satisfies -> terraform_config
    network_security - satisfies -> terraform_config
    data_protection - satisfies -> terraform_config
    audit_logging - satisfies -> terraform_config
    auto_scaling - satisfies -> terraform_config
    load_balancing - satisfies -> terraform_config
    resource_optimization - satisfies -> terraform_config

    security_config - verifies -> security_tests
    network_security - verifies -> security_tests
    audit_logging - verifies -> security_tests
    auto_scaling - verifies -> performance_tests
    load_balancing - verifies -> performance_tests

    data_protection - verifies -> compliance_scanner
    resource_optimization - verifies -> cost_analyzer

