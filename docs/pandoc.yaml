---
# Pandoc configuration file for "Arkitektur som kod" book
# Simplified configuration for better compatibility

# General settings
standalone: true
toc: true
toc-depth: 3
number-sections: true

# Chapter page break configuration
top-level-division: chapter

# Template and styling - Try Eisvogel first, fallback to default
template: eisvogel.latex

# PDF-specific settings
pdf-engine: xelatex

# Syntax highlighting configuration
highlight-style: tango
# Alternative highlight styles: pygments, kate, monochrome, espresso, zenburn, haddock, breezedark, tango

# Metadata for document
metadata:
  title: "Arkitektur som kod"
  subtitle: "Infrastructure as Code i praktiken"
  author: "Kodarkitektur Bokverkstad"
  date: "2024"
  language: sv
  lang: sv-SE

# Variables for better compatibility
variables:
  documentclass: book
  classoption:
    - twoside
    - openany
  geometry:
    - top=2.5cm
    - bottom=2.5cm
    - left=2.5cm
    - right=2.5cm
  fontsize: 11pt
  linestretch: 1.2
  lang: sv-SE
  cover-image: "images/book-cover.png"
  include-before: |
    \newpage
    \thispagestyle{empty}
    \begin{center}
    \includegraphics[width=\textwidth,height=\textheight,keepaspectratio]{images/book-cover.png}
    \end{center}
    \newpage
  # Simplified header handling
  header-includes: |
    \usepackage{fancyhdr}
    \usepackage{titlesec}
    \setlength{\headheight}{14pt}
    \pagestyle{fancy}
    \fancyhf{}
    \newcommand{\currentpartletter}{}
    \newcommand{\currentparttitle}{}
    \newcommand{\currentpartformat}{}
    \newcommand{\setbookpart}[1]{%
      \renewcommand{\currentpartletter}{\thepart}%
      \renewcommand{\currentparttitle}{#1}%
      \renewcommand{\currentpartformat}{PART~\thepart\space--\space #1}%
    }
    \renewcommand{\chaptermark}[1]{\markboth{\thechapter.\ #1}{}}
    \fancyhead[LE]{\small\bfseries \currentpartformat}
    \fancyhead[RO]{\small\bfseries \leftmark}
    \fancyfoot[C]{\thepage}
    \renewcommand{\headrulewidth}{0pt}
    \renewcommand{\partname}{Part}
    \renewcommand{\thepart}{\Alph{part}}
    \titleformat{\part}[display]
      {\bfseries\centering\Huge}
      {PART \thepart}
      {0pt}
      {\thispagestyle{empty}\vspace*{0.5\textheight}}
    \titlespacing*{\part}{0pt}{0pt}{0pt}
    \usepackage{graphicx}
    \usepackage{pdfpages}

# For EPUB output
epub-chapter-level: 1

# Additional filters for better output
filters: []